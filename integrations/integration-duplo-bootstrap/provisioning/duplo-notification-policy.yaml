apiVersion: grizzly.grafana.com/v1alpha1
kind: AlertNotificationPolicy
metadata:
  name: global
spec:
  group_by:
    - grafana_folder
    - alertname
  receiver: grafana-default-email
  orgId: 1
  routes:
    - object_matchers:
        - - tenant
          - =~
          - ${AOS_NAMESPACE_FILTER}
      receiver: duplo-webhook-notifications
    - object_matchers:
        - - namespace
          - =~
          - ${AOS_NAMESPACE_FILTER}
      receiver: duplo-webhook-notifications
    - object_matchers:
        - - label_tenantname
          - =~
          - ${AOS_NAMESPACE_FILTER}
      receiver: duplo-webhook-notifications
    - object_matchers:
        - - owner
          - =
          - duplo
      receiver: duplo-webhook-notifications
    - object_matchers:
        - - owner
          - =
          - duplo
        - - alertname
          - =
          - AlertmanagerWebhookFailed
      receiver: duplo-aos-slack