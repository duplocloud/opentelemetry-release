global:
  resolve_timeout: 5m
  http_config:
    tls_config:
      insecure_skip_verify: false
    follow_redirects: true
    enable_http2: true
route:
  receiver: default-receiver
  group_by:
    - alertname
  routes:
    - receiver: duplo-webhook-notifications
      matchers:
        - namespace=~"${AOS_NAMESPACE_FILTER}"
        - severity!="info"
        - daemonset!~"duplo-monitoring-.*"
        - alertname!="KubeHpaMaxedOut"
        - pod!~"duplo-monitoring-beyla-.*"
        - pod!~"duplo-monitoring-prometheus-.*"
        - pod!~"duplo-monitoring-alloy-profiles-.*"
        - pod!~"duplo-monitoring-alloy-logs-.*"
receivers:
  - name: default-receiver
    slack_configs: []
  - name: duplo-webhook-notifications
    webhook_configs:
      - send_resolved: true
        url: ${AOS_AUTOMATION_WEBHOOK}
templates:
  - duplo_templates.tpl
