apiVersion: grizzly.grafana.com/v1alpha1
kind: Dashboard
metadata:
    folder: integration-docker-native
    name: docker-overview
spec:
    annotations:
        list:
            - builtIn: 1
              datasource:
                type: grafana
                uid: -- Grafana --
              enable: true
              hide: true
              iconColor: rgba(0, 211, 255, 1)
              name: Annotations & Alerts
              type: dashboard
    editable: false
    fiscalYearStartMonth: 0
    graphTooltip: 0
    links:
        - asDropdown: false
          includeVars: true
          keepTime: true
          tags:
            - integration-docker-native
          title: All Docker dashboards
          type: dashboards
    panels:
        - collapsed: false
          gridPos:
            h: 1
            w: 24
            x: 0
            "y": 0
          id: 16
          panels: []
          title: Integration Status
          type: row
        - datasource:
            type: datasource
            uid: -- Mixed --
          description: Shows if metrics are being received for the selected time range.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: fixed
                mappings:
                    - options:
                        match: "null"
                        result:
                            color: light-red
                            index: 0
                            text: No metrics received - Check configuration
                      type: special
                    - options:
                        from: 0
                        result:
                            color: light-red
                            index: 1
                            text: Failed to collect metrics
                        to: 0
                      type: range
                    - options:
                        from: 1
                        result:
                            color: light-green
                            index: 2
                            text: Receiving metrics
                        to: 1e+06
                      type: range
                noValue: No data
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: string
            overrides: []
          gridPos:
            h: 2
            w: 8
            x: 0
            "y": 1
          id: 17
          options:
            colorMode: background
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          targets:
            - datasource:
                type: prometheus
                uid: $prometheus_datasource
              expr: |
                vector(1) and on() ((count(up{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"} == 1) > 0) and (absent(absent(machine_scrape_error{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"})))) or vector(0) and on() ((count(up{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"}) > 0) and (absent(machine_scrape_error{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"})))
              refId: A
          title: Metrics
          type: stat
        - datasource:
            type: datasource
            uid: -- Mixed --
          description: Shows the timestamp of the latest metrics received for this integration in the last 24 hours.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: fixed
                mappings: []
                noValue: No data
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: dateTimeFromNow
            overrides: []
          gridPos:
            h: 2
            w: 8
            x: 8
            "y": 1
          id: 18
          options:
            colorMode: background
            graphMode: none
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: Time
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          targets:
            - datasource:
                type: prometheus
                uid: $prometheus_datasource
              expr: |
                vector(1) and on() ((count(up{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"} == 1) > 0) and (absent(absent(machine_scrape_error{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"})))) or vector(0) and on() ((count(up{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"}) > 0) and (absent(machine_scrape_error{asserts_env=~"$env", asserts_site=~"$site", job="integrations/docker"})))
              refId: A
          timeFrom: now-24h
          title: Latest metrics received
          type: stat
        - datasource:
            type: datasource
            uid: -- Mixed --
          description: Shows the installed version of this integration.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: fixed
                mappings: []
                noValue: 1.3.2
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: string
            overrides: []
          gridPos:
            h: 2
            w: 8
            x: 16
            "y": 1
          id: 19
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          title: Integration version
          type: stat
        - collapsed: false
          gridPos:
            h: 1
            w: 24
            x: 0
            "y": 3
          id: 1
          panels: []
          title: Overview
          type: row
        - datasource:
            default: false
            type: prometheus
            uid: ${prometheus_datasource}
          description: Total number of running containers last seen by the exporter.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: fixed
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: Containers
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: ""
          gridPos:
            h: 4
            w: 4
            x: 0
            "y": 4
          id: 2
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: count(container_last_seen{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet",job=~"$job",tenant=~"$tenant",instance=~"$instance", id=~"/system.slice/docker.+", name!=""})
              format: time_series
              instant: false
              legendFormat: '{{instance}}: Containers'
              refId: Containers
          title: Containers
          type: stat
        - datasource:
            default: false
            type: prometheus
            uid: ${prometheus_datasource}
          description: Total number of distinct images found across running containers.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: fixed
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: Images
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: ""
          gridPos:
            h: 4
            w: 4
            x: 4
            "y": 4
          id: 3
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: count (sum by (image) (container_last_seen{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet",job=~"$job",tenant=~"$tenant",instance=~"$instance", id=~"/system.slice/docker.+", name!=""}))
              format: time_series
              instant: false
              legendFormat: '{{instance}}: Images'
              refId: Images
          title: Images
          type: stat
        - datasource:
            default: false
            type: datasource
            uid: -- Mixed --
          description: |
            Total CPU utilization percent is a metric that indicates the overall level of central processing unit (CPU) usage in a computer system.
            It represents the combined load placed on all CPU cores or processors.

            For instance, if the total CPU utilization percent is 50%, it means that,
            on average, half of the CPU's processing capacity is being used to execute tasks. A higher percentage indicates that the CPU is working more intensively, potentially leading to system slowdowns if it remains consistently high.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: continuous-BlYlRd
                decimals: 1
                mappings: []
                max: 100
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: percent
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: CPU usage
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: percent
          gridPos:
            h: 4
            w: 4
            x: 8
            "y": 4
          id: 4
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: avg by (job,instance, name) (rate(container_cpu_usage_seconds_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet",job=~"$job",tenant=~"$tenant",instance=~"$instance", id=~"/system.slice/docker.+", name!=""}[$__rate_interval])) * 100
              format: time_series
              instant: false
              legendFormat: '{{instance}}'
              refId: CPU usage
          title: CPU usage
          transformations:
            - id: calculateField
              options:
                mode: reduceRow
                reduce:
                    reducer: sum
                replaceFields: true
          type: stat
        - datasource:
            default: false
            type: prometheus
            uid: ${prometheus_datasource}
          description: Memory reserved by the containers on the machine.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: continuous-BlYlRd
                decimals: 1
                mappings: []
                max: 100
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: percent
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: Memory reserved
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: percent
          gridPos:
            h: 4
            w: 4
            x: 12
            "y": 4
          id: 5
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: "sum(\n  container_spec_memory_reservation_limit_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job!=\"kubelet\",job=~\"$job\",tenant=~\"$tenant\",instance=~\"$instance\", id=~\"/system.slice/docker.+\", name!=\"\"}\n  )\n/ \navg(\n    machine_memory_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job!=\"kubelet\",job=~\"$job\",instance=~\"$instance\"}\n) * 100\n"
              format: time_series
              instant: false
              legendFormat: '{{instance}}: Memory reserved'
              refId: Memory reserved
          title: Memory reserved
          transformations:
            - id: calculateField
              options:
                mode: reduceRow
                reduce:
                    reducer: sum
                replaceFields: true
          type: stat
        - datasource:
            default: false
            type: prometheus
            uid: ${prometheus_datasource}
          description: Memory used by all containers out of machine total.
          fieldConfig:
            defaults:
                color:
                    fixedColor: text
                    mode: continuous-BlYlRd
                decimals: 1
                mappings: []
                max: 100
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: percent
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: Memory used
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: percent
          gridPos:
            h: 4
            w: 4
            x: 16
            "y": 4
          id: 6
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: auto
            wideLayout: true
          pluginVersion: 11.2.0
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: |
                avg(
                  sum by (instance) (container_memory_usage_bytes{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet",job=~"$job",tenant=~"$tenant",instance=~"$instance", id=~"/system.slice/docker.+", name!=""})
                  /
                  avg by (instance) (machine_memory_bytes{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet",job=~"$job",tenant=~"$tenant",instance=~"$instance"})
                ) * 100
              format: time_series
              instant: false
              legendFormat: '{{instance}}: Memory used'
              refId: Memory used
          title: Memory used
          transformations:
            - id: calculateField
              options:
                mode: reduceRow
                reduce:
                    reducer: sum
                replaceFields: true
          type: stat
        - collapsed: false
          gridPos:
            h: 1
            w: 24
            x: 0
            "y": 8
          id: 7
          panels: []
          title: Compute
          type: row
        - datasource:
            default: false
            type: prometheus
            uid: ${prometheus_datasource}
          description: CPU time consumed in seconds by container.
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    axisSoftMax: 100
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 30
                    gradientMode: opacity
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: smooth
                    lineWidth: 2
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: normal
                    thresholdsStyle:
                        mode: "off"
                mappings: []
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: CPU usage
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: percent
          gridPos:
            h: 7
            w: 12
            x: 0
            "y": 9
          id: 8
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: multi
                sort: desc
          pluginVersion: 11.4.0-77868
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: |
                100 *
                  rate(container_cpu_usage_seconds_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}'
              refId: CPU usage
          title: CPU usage
          type: timeseries
        - datasource:
            default: false
            type: prometheus
            uid: ${prometheus_datasource}
          description: Current memory usage in bytes, including all memory regardless of when it was accessed by container.
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 30
                    gradientMode: opacity
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: smooth
                    lineWidth: 2
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: normal
                    thresholdsStyle:
                        mode: "off"
                mappings: []
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: bytes
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: Memory usage
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: decbytes
                - matcher:
                    id: byRegexp
                    options: .*(T|t)otal.*
                  properties:
                    - id: color
                      value:
                        fixedColor: light-orange
                        mode: fixed
                    - id: custom.fillOpacity
                      value: 0
                    - id: custom.lineStyle
                      value:
                        dash:
                            - 10
                            - 10
                        fill: dash
          gridPos:
            h: 7
            w: 12
            x: 12
            "y": 9
          id: 9
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: multi
                sort: desc
          pluginVersion: 11.4.0-77868
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: container_memory_usage_bytes{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}
              format: time_series
              instant: false
              legendFormat: '{{name}}'
              refId: Memory usage
          title: Memory usage
          type: timeseries
        - collapsed: false
          gridPos:
            h: 1
            w: 24
            x: 0
            "y": 16
          id: 10
          panels: []
          title: Network
          type: row
        - datasource:
            default: false
            type: datasource
            uid: -- Mixed --
          description: Network traffic (bits per sec) measures data transmitted and received.
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: out(-) | in(+)
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 30
                    gradientMode: opacity
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: smooth
                    lineWidth: 2
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: normal
                    thresholdsStyle:
                        mode: "off"
                decimals: 1
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: bps
            overrides:
                - matcher:
                    id: byRegexp
                    options: /transmit|tx|out/
                  properties:
                    - id: custom.transform
                      value: negative-Y
                - matcher:
                    id: byFrameRefID
                    options: received
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: bps
                - matcher:
                    id: byFrameRefID
                    options: transmitted
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: bps
          gridPos:
            h: 7
            w: 12
            x: 0
            "y": 17
          id: 11
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: multi
                sort: desc
          pluginVersion: 11.4.0-77868
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: |
                8 *
                  rate(container_network_receive_bytes_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{interface}} receive'
              refId: received
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: |
                8 *
                  rate(container_network_transmit_bytes_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{interface}} transmit'
              refId: transmitted
          title: Network traffic
          type: timeseries
        - datasource:
            default: false
            type: datasource
            uid: -- Mixed --
          description: "Network errors refer to issues that occur during the transmission of data across a network. \n\nThese errors can result from various factors, including physical issues, jitter, collisions, noise and interference.\n\nMonitoring network errors is essential for diagnosing and resolving issues, as they can indicate problems with network hardware or environmental factors affecting network quality.\n"
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 30
                    gradientMode: opacity
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: smooth
                    lineWidth: 2
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: normal
                    thresholdsStyle:
                        mode: "off"
                decimals: 1
                mappings: []
                noValue: No errors
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
                        - color: red
                          value: 80
                unit: pps
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: drops received
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: pps
                - matcher:
                    id: byFrameRefID
                    options: drops transmitted
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: pps
                - matcher:
                    id: byFrameRefID
                    options: errors received
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: pps
                - matcher:
                    id: byFrameRefID
                    options: errors transmitted
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: pps
          gridPos:
            h: 7
            w: 12
            x: 12
            "y": 17
          id: 12
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: multi
                sort: desc
          pluginVersion: 11.4.0-77868
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: rate(container_network_receive_packets_dropped_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{interface}} rx drops'
              refId: drops received
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: rate(container_network_transmit_packets_dropped_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{interface}} tx drops'
              refId: drops transmitted
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: rate(container_network_receive_errors_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{interface}} rx errors'
              refId: errors received
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: rate(container_network_transmit_errors_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{interface}} tx errors'
              refId: errors transmitted
          title: Network errors and drops
          type: timeseries
        - collapsed: false
          gridPos:
            h: 1
            w: 24
            x: 0
            "y": 24
          id: 13
          panels: []
          title: Storage
          type: row
        - datasource:
            default: false
            type: datasource
            uid: -- Mixed --
          description: |
            Disk space usage is the amount of storage being used on a device's hard drive or storage medium, in bytes.
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 1
                    gradientMode: opacity
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: smooth
                    lineWidth: 2
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                mappings: []
                min: 0
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: red
                          value: 80
                unit: bytes
            overrides:
                - matcher:
                    id: byFrameRefID
                    options: Disk space usage
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: decbytes
          gridPos:
            h: 7
            w: 12
            x: 0
            "y": 25
          id: 14
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: multi
                sort: desc
          pluginVersion: 11.4.0-77868
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: container_fs_usage_bytes{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",instance=~"$instance",tenant=~"$tenant",name=~"$name"}
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{device}}'
              refId: Disk space usage
          title: Disk usage
          type: timeseries
        - datasource:
            default: false
            type: datasource
            uid: -- Mixed --
          description: The number of I/O requests per second for the device/volume.
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: true
                    axisColorMode: text
                    axisLabel: write(-) | read(+)
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 1
                    gradientMode: opacity
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: smooth
                    lineWidth: 2
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: never
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: red
                          value: 80
                unit: iops
            overrides:
                - matcher:
                    id: byRegexp
                    options: /write|written/
                  properties:
                    - id: custom.transform
                      value: negative-Y
                - matcher:
                    id: byFrameRefID
                    options: Disk reads
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: reqps
                - matcher:
                    id: byFrameRefID
                    options: Disk writes
                  properties:
                    - id: mappings
                      value: []
                    - id: unit
                      value: reqps
          gridPos:
            h: 7
            w: 12
            x: 12
            "y": 25
          id: 15
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: multi
                sort: desc
          pluginVersion: 11.4.0-77868
          targets:
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: rate(container_fs_reads_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{device}} read'
              refId: Disk reads
            - datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              editorMode: code
              expr: rate(container_fs_writes_total{asserts_env=~"$env", asserts_site=~"$site", job!="kubelet", id=~"/system.slice/docker.+", name!="",job=~"$job",tenant=~"$tenant",instance=~"$instance",name=~"$name"}[$__rate_interval])
              format: time_series
              instant: false
              legendFormat: '{{name}}/{{device}} write'
              refId: Disk writes
          title: Disk I/O
          type: timeseries
    refresh: 30s
    schemaVersion: 39
    tags:
        - docker-integration
    templating:
        list:
            - allValue: .*
              current:
                selected: false
                text: All
                value: $__all
              datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              definition: ""
              hide: 2
              includeAll: true
              label: Asserts environment
              multi: false
              name: env
              options: []
              query: label_values(asserts:mixin_workload_job, asserts_env)
              refresh: 2
              regex: ""
              skipUrlSync: false
              sort: 1
              type: query
            - allValue: .*
              current:
                selected: false
                text: All
                value: $__all
              datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              definition: ""
              hide: 2
              includeAll: true
              label: Asserts site
              multi: false
              name: site
              options: []
              query: label_values(asserts:mixin_workload_job{asserts_env=~"$env"}, asserts_site)
              refresh: 2
              regex: ""
              skipUrlSync: false
              sort: 1
              type: query
            - current:
                selected: false
                text: duplo-metrics
                value: duplo-metrics
              hide: 0
              includeAll: false
              label: Prometheus data source
              multi: false
              name: prometheus_datasource
              options: []
              query: prometheus
              queryValue: ""
              refresh: 1
              regex: ""
              skipUrlSync: false
              type: datasource
            - allValue: .+
              current:
                selected: true
                text:
                    - All
                value:
                    - $__all
              datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              definition: ""
              hide: 0
              includeAll: true
              label: Job
              multi: true
              name: job
              options: []
              query: label_values(container_last_seen{job!="kubelet"}, job)
              refresh: 2
              regex: ""
              skipUrlSync: false
              sort: 1
              type: query
            - allValue: .+
              current:
                selected: true
                text:
                    - All
                value:
                    - $__all
              datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              definition: label_values(container_last_seen{job!="kubelet"},tenant)
              hide: 0
              includeAll: true
              label: Tenant
              multi: true
              name: tenant
              options: []
              query:
                qryType: 1
                query: label_values(container_last_seen{job!="kubelet"},tenant)
                refId: PrometheusVariableQueryEditor-VariableQuery
              refresh: 2
              regex: ""
              skipUrlSync: false
              sort: 1
              type: query
            - allValue: .+
              current:
                selected: false
                text: ip-10-62-10-196
                value: ip-10-62-10-196
              datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              definition: label_values(container_last_seen{job!="kubelet", job=~"$job", tenant=~"$tenant"},instance)
              hide: 0
              includeAll: true
              label: Instance
              multi: true
              name: instance
              options: []
              query:
                qryType: 1
                query: label_values(container_last_seen{job!="kubelet", job=~"$job", tenant=~"$tenant"},instance)
                refId: PrometheusVariableQueryEditor-VariableQuery
              refresh: 2
              regex: ""
              skipUrlSync: false
              sort: 1
              type: query
            - allValue: .+
              current:
                selected: true
                text:
                    - All
                value:
                    - $__all
              datasource:
                type: prometheus
                uid: ${prometheus_datasource}
              definition: label_values(container_last_seen{job!="kubelet", id=~"/system.slice/docker.+", name!="", job=~"$job", instance=~"$instance", tenant=~"$tenant"},name)
              hide: 0
              includeAll: true
              label: Name
              multi: true
              name: name
              options: []
              query:
                qryType: 1
                query: label_values(container_last_seen{job!="kubelet", id=~"/system.slice/docker.+", name!="", job=~"$job", instance=~"$instance", tenant=~"$tenant"},name)
                refId: PrometheusVariableQueryEditor-VariableQuery
              refresh: 2
              regex: ""
              skipUrlSync: false
              sort: 1
              type: query
    time:
        from: now-1h
        to: now
    timepicker: {}
    timezone: default
    title: Docker Overview
    uid: docker-overview
    weekStart: ""